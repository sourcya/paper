var ee,R,Me,ft,W,Ee,Ie,De,Ae,le,re,ie,ht,$={},Le=[],vt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,te=Array.isArray;function U(t,e){for(var n in e)t[n]=e[n];return t}function se(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function yt(t,e,n){var o,i,r,a={};for(r in e)r=="key"?o=e[r]:r=="ref"?i=e[r]:a[r]=e[r];if(arguments.length>2&&(a.children=arguments.length>3?ee.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)a[r]===void 0&&(a[r]=t.defaultProps[r]);return Y(t,a,o,i,null)}function Y(t,e,n,o,i){var r={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Me,__i:-1,__u:0};return i==null&&R.vnode!=null&&R.vnode(r),r}function O(t){return t.children}function Z(t,e){this.props=t,this.context=e}function J(t,e){if(e==null)return t.__?J(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?J(t):null}function ze(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return ze(t)}}function Ce(t){(!t.__d&&(t.__d=!0)&&W.push(t)&&!Q.__r++||Ee!=R.debounceRendering)&&((Ee=R.debounceRendering)||Ie)(Q)}function Q(){for(var t,e,n,o,i,r,a,u=1;W.length;)W.length>u&&W.sort(De),t=W.shift(),u=W.length,t.__d&&(n=void 0,o=void 0,i=(o=(e=t).__v).__e,r=[],a=[],e.__P&&((n=U({},o)).__v=o.__v+1,R.vnode&&R.vnode(n),ce(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,r,i??J(o),!!(32&o.__u),a),n.__v=o.__v,n.__.__k[n.__i]=n,Ne(r,n,a),o.__e=o.__=null,n.__e!=i&&ze(n)));Q.__r=0}function Ge(t,e,n,o,i,r,a,u,d,_,b){var l,x,y,P,f,m,g,k=o&&o.__k||Le,E=e.length;for(d=mt(n,e,k,d,E),l=0;l<E;l++)(y=n.__k[l])!=null&&(x=y.__i==-1?$:k[y.__i]||$,y.__i=l,m=ce(t,y,x,i,r,a,u,d,_,b),P=y.__e,y.ref&&x.ref!=y.ref&&(x.ref&&ue(x.ref,null,y),b.push(y.ref,y.__c||P,y)),f==null&&P!=null&&(f=P),(g=!!(4&y.__u))||x.__k===y.__k?d=He(y,d,t,g):typeof y.type=="function"&&m!==void 0?d=m:P&&(d=P.nextSibling),y.__u&=-7);return n.__e=f,d}function mt(t,e,n,o,i){var r,a,u,d,_,b=n.length,l=b,x=0;for(t.__k=new Array(i),r=0;r<i;r++)(a=e[r])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=t.__k[r]=Y(null,a,null,null,null):te(a)?a=t.__k[r]=Y(O,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=t.__k[r]=Y(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):t.__k[r]=a,d=r+x,a.__=t,a.__b=t.__b+1,u=null,(_=a.__i=gt(a,n,d,l))!=-1&&(l--,(u=n[_])&&(u.__u|=2)),u==null||u.__v==null?(_==-1&&(i>b?x--:i<b&&x++),typeof a.type!="function"&&(a.__u|=4)):_!=d&&(_==d-1?x--:_==d+1?x++:(_>d?x--:x++,a.__u|=4))):t.__k[r]=null;if(l)for(r=0;r<b;r++)(u=n[r])!=null&&!(2&u.__u)&&(u.__e==o&&(o=J(u)),Fe(u,u));return o}function He(t,e,n,o){var i,r;if(typeof t.type=="function"){for(i=t.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=t,e=He(i[r],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=J(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function gt(t,e,n,o){var i,r,a,u=t.key,d=t.type,_=e[n],b=_!=null&&(2&_.__u)==0;if(_===null&&u==null||b&&u==_.key&&d==_.type)return n;if(o>(b?1:0)){for(i=n-1,r=n+1;i>=0||r<e.length;)if((_=e[a=i>=0?i--:r++])!=null&&!(2&_.__u)&&u==_.key&&d==_.type)return a}return-1}function Pe(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||vt.test(e)?n:n+"px"}function q(t,e,n,o,i){var r,a;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||Pe(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||Pe(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(Ae,"$1")),a=e.toLowerCase(),e=a in t||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?o?n.u=o.u:(n.u=le,t.addEventListener(e,r?ie:re,r)):t.removeEventListener(e,r?ie:re,r);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Re(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=le++;else if(e.t<n.u)return;return n(R.event?R.event(e):e)}}}function ce(t,e,n,o,i,r,a,u,d,_){var b,l,x,y,P,f,m,g,k,E,s,w,I,N,C,S,M,L=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(d=!!(32&n.__u),r=[u=e.__e=n.__e]),(b=R.__b)&&b(e);e:if(typeof L=="function")try{if(g=e.props,k="prototype"in L&&L.prototype.render,E=(b=L.contextType)&&o[b.__c],s=b?E?E.props.value:b.__:o,n.__c?m=(l=e.__c=n.__c).__=l.__E:(k?e.__c=l=new L(g,s):(e.__c=l=new Z(g,s),l.constructor=L,l.render=xt),E&&E.sub(l),l.state||(l.state={}),l.__n=o,x=l.__d=!0,l.__h=[],l._sb=[]),k&&l.__s==null&&(l.__s=l.state),k&&L.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=U({},l.__s)),U(l.__s,L.getDerivedStateFromProps(g,l.__s))),y=l.props,P=l.state,l.__v=e,x)k&&L.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),k&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(k&&L.getDerivedStateFromProps==null&&g!==y&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(g,s),e.__v==n.__v||!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(g,l.__s,s)===!1){for(e.__v!=n.__v&&(l.props=g,l.state=l.__s,l.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(G){G&&(G.__=e)}),w=0;w<l._sb.length;w++)l.__h.push(l._sb[w]);l._sb=[],l.__h.length&&a.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(g,l.__s,s),k&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(y,P,f)})}if(l.context=s,l.props=g,l.__P=t,l.__e=!1,I=R.__r,N=0,k){for(l.state=l.__s,l.__d=!1,I&&I(e),b=l.render(l.props,l.state,l.context),C=0;C<l._sb.length;C++)l.__h.push(l._sb[C]);l._sb=[]}else do l.__d=!1,I&&I(e),b=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++N<25);l.state=l.__s,l.getChildContext!=null&&(o=U(U({},o),l.getChildContext())),k&&!x&&l.getSnapshotBeforeUpdate!=null&&(f=l.getSnapshotBeforeUpdate(y,P)),S=b,b!=null&&b.type===O&&b.key==null&&(S=Ke(b.props.children)),u=Ge(t,te(S)?S:[S],e,n,o,i,r,a,u,d,_),l.base=e.__e,e.__u&=-161,l.__h.length&&a.push(l),m&&(l.__E=l.__=null)}catch(G){if(e.__v=null,d||r!=null)if(G.then){for(e.__u|=d?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;r[r.indexOf(u)]=null,e.__e=u}else{for(M=r.length;M--;)se(r[M]);ae(e)}else e.__e=n.__e,e.__k=n.__k,G.then||ae(e);R.__e(G,e,n)}else r==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):u=e.__e=bt(n.__e,e,n,o,i,r,a,d,_);return(b=R.diffed)&&b(e),128&e.__u?void 0:u}function ae(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ae)}function Ne(t,e,n){for(var o=0;o<n.length;o++)ue(n[o],n[++o],n[++o]);R.__c&&R.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(r){r.call(i)})}catch(r){R.__e(r,i.__v)}})}function Ke(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:te(t)?t.map(Ke):U({},t)}function bt(t,e,n,o,i,r,a,u,d){var _,b,l,x,y,P,f,m=n.props||$,g=e.props,k=e.type;if(k=="svg"?i="http://www.w3.org/2000/svg":k=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(_=0;_<r.length;_++)if((y=r[_])&&"setAttribute"in y==!!k&&(k?y.localName==k:y.nodeType==3)){t=y,r[_]=null;break}}if(t==null){if(k==null)return document.createTextNode(g);t=document.createElementNS(i,k,g.is&&g),u&&(R.__m&&R.__m(e,r),u=!1),r=null}if(k==null)m===g||u&&t.data==g||(t.data=g);else{if(r=r&&ee.call(t.childNodes),!u&&r!=null)for(m={},_=0;_<t.attributes.length;_++)m[(y=t.attributes[_]).name]=y.value;for(_ in m)if(y=m[_],_!="children"){if(_=="dangerouslySetInnerHTML")l=y;else if(!(_ in g)){if(_=="value"&&"defaultValue"in g||_=="checked"&&"defaultChecked"in g)continue;q(t,_,null,y,i)}}for(_ in g)y=g[_],_=="children"?x=y:_=="dangerouslySetInnerHTML"?b=y:_=="value"?P=y:_=="checked"?f=y:u&&typeof y!="function"||m[_]===y||q(t,_,y,m[_],i);if(b)u||l&&(b.__html==l.__html||b.__html==t.innerHTML)||(t.innerHTML=b.__html),e.__k=[];else if(l&&(t.innerHTML=""),Ge(e.type=="template"?t.content:t,te(x)?x:[x],e,n,o,k=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,a,r?r[0]:n.__k&&J(n,0),u,d),r!=null)for(_=r.length;_--;)se(r[_]);u||(_="value",k=="progress"&&P==null?t.removeAttribute("value"):P!=null&&(P!==t[_]||k=="progress"&&!P||k=="option"&&P!=m[_])&&q(t,_,P,m[_],i),_="checked",f!=null&&f!=t[_]&&q(t,_,f,m[_],i))}return t}function ue(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(i){R.__e(i,n)}}function Fe(t,e,n){var o,i;if(R.unmount&&R.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||ue(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){R.__e(r,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&Fe(o[i],e,n||typeof t.type!="function");n||se(t.__e),t.__c=t.__=t.__e=void 0}function xt(t,e,n){return this.constructor(t,n)}function Ue(t,e,n){var o,i,r,a;e==document&&(e=document.documentElement),R.__&&R.__(t,e),i=(o=typeof n=="function")?null:n&&n.__k||e.__k,r=[],a=[],ce(e,t=(!o&&n||e).__k=yt(O,null,[t]),i||$,$,e.namespaceURI,!o&&n?[n]:i?null:e.firstChild?ee.call(e.childNodes):null,r,!o&&n?n:i?i.__e:e.firstChild,o,a),Ne(r,t,a)}ee=Le.slice,R={__e:function(t,e,n,o){for(var i,r,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),a=i.__d),a)return i.__E=i}catch(u){t=u}throw t}},Me=0,ft=function(t){return t!=null&&t.constructor===void 0},Z.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=U({},this.state),typeof t=="function"&&(t=t(U({},n),this.props)),t&&U(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ce(this))},Z.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ce(this))},Z.prototype.render=O,W=[],Ie=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,De=function(t,e){return t.__v.__b-e.__v.__b},Q.__r=0,Ae=/(PointerCapture)$|Capture$/i,le=0,re=Re(!1),ie=Re(!0),ht=0;var V,D,de,We,j=0,qe=[],A=R,Je=A.__b,Oe=A.__r,Be=A.diffed,Xe=A.__c,$e=A.unmount,Ve=A.__;function _e(t,e){A.__h&&A.__h(D,t,j||e),j=0;var n=D.__H||(D.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function B(t){return j=1,kt(Qe,t)}function kt(t,e,n){var o=_e(V++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Qe(void 0,e),function(u){var d=o.__N?o.__N[0]:o.__[0],_=o.t(d,u);d!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=D,!D.__f)){var i=function(u,d,_){if(!o.__c.__H)return!0;var b=o.__c.__H.__.filter(function(x){return!!x.__c});if(b.every(function(x){return!x.__N}))return!r||r.call(this,u,d,_);var l=o.__c.props!==u;return b.forEach(function(x){if(x.__N){var y=x.__[0];x.__=x.__N,x.__N=void 0,y!==x.__[0]&&(l=!0)}}),r&&r.call(this,u,d,_)||l};D.__f=!0;var r=D.shouldComponentUpdate,a=D.componentWillUpdate;D.componentWillUpdate=function(u,d,_){if(this.__e){var b=r;r=void 0,i(u,d,_),r=b}a&&a.call(this,u,d,_)},D.shouldComponentUpdate=i}return o.__N||o.__}function oe(t,e){var n=_e(V++,3);!A.__s&&Ze(n.__H,e)&&(n.__=t,n.u=e,D.__H.__h.push(n))}function K(t){return j=5,Ye(function(){return{current:t}},[])}function Ye(t,e){var n=_e(V++,7);return Ze(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function z(t,e){return j=8,Ye(function(){return t},e)}function St(){for(var t;t=qe.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ne),t.__H.__h.forEach(pe),t.__H.__h=[]}catch(e){t.__H.__h=[],A.__e(e,t.__v)}}A.__b=function(t){D=null,Je&&Je(t)},A.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Ve&&Ve(t,e)},A.__r=function(t){Oe&&Oe(t),V=0;var e=(D=t.__c).__H;e&&(de===D?(e.__h=[],D.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(ne),e.__h.forEach(pe),e.__h=[],V=0)),de=D},A.diffed=function(t){Be&&Be(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(qe.push(e)!==1&&We===A.requestAnimationFrame||((We=A.requestAnimationFrame)||wt)(St)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),de=D=null},A.__c=function(t,e){e.some(function(n){try{n.__h.forEach(ne),n.__h=n.__h.filter(function(o){return!o.__||pe(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],A.__e(o,n.__v)}}),Xe&&Xe(t,e)},A.unmount=function(t){$e&&$e(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{ne(o)}catch(i){e=i}}),n.__H=void 0,e&&A.__e(e,n.__v))};var je=typeof requestAnimationFrame=="function";function wt(t){var e,n=function(){clearTimeout(o),je&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);je&&(e=requestAnimationFrame(n))}function ne(t){var e=D,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),D=e}function pe(t){var e=D;t.__c=t.__(),D=e}function Ze(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Qe(t,e){return typeof e=="function"?e(t):e}function fe(){return Math.random().toString(36).substring(2,15)}function he(t){let e={id:fe(),name:"Untitled",elements:[],gridSettings:{type:"square",spacing:50,color:"#cccccc",opacity:.5},createdAt:Date.now(),updatedAt:Date.now()},n=[[]],o=0,i=50,r=null;function a(){r&&clearTimeout(r),r=setTimeout(()=>{w()},500)}function u(){return e}function d(h){e.elements.push(h),e.updatedAt=Date.now(),m(),t(e),a()}function _(h){e.elements=e.elements.filter(T=>T.id!==h),e.updatedAt=Date.now(),m(),t(e),a()}function b(h,T){return h.x>=T.x&&h.x<=T.x+T.width&&h.y>=T.y&&h.y<=T.y+T.height}function l(h,T){let p=[],v=[];for(let H of h.points)b(H,T)?(v.length>=2&&p.push({points:v}),v=[]):v.push(H);return v.length>=2&&p.push({points:v}),p}function x(h,T){return h.x>=T.x&&h.y>=T.y&&h.x+h.width<=T.x+T.width&&h.y+h.height<=T.y+T.height}function y(h){let T=[],p=!1;for(let v of e.elements)if("points"in v){let H=v,F=l(H,h);if(F.length===0)p=!0;else if(F.length===1&&F[0].points.length===H.points.length)T.push(v);else{p=!0;for(let Te of F)Te.points.length>=2&&T.push({...H,id:fe(),points:Te.points})}}else if("width"in v&&"height"in v&&!("content"in v))x(v,h)?p=!0:T.push(v);else if("content"in v){let H=v,F={x:H.x,y:H.y,width:H.content.length*H.fontSize*.6,height:H.fontSize};x(F,h)?p=!0:T.push(v)}else T.push(v);p&&(e.elements=T,e.updatedAt=Date.now(),m(),t(e),a())}function P(){e.elements=[],e.updatedAt=Date.now(),m(),t(e),a()}function f(h){e.gridSettings={...e.gridSettings,...h},e.updatedAt=Date.now(),t(e),a()}function m(){n=n.slice(0,o+1),n.push(e.elements.map(h=>({...h}))),n.length>i?n.shift():o++}function g(){return o>0?(o--,e.elements=n[o].map(h=>({...h})),e.updatedAt=Date.now(),t(e),!0):!1}function k(){return o<n.length-1?(o++,e.elements=n[o].map(h=>({...h})),e.updatedAt=Date.now(),t(e),!0):!1}function E(){return o>0}function s(){return o<n.length-1}function w(){let h=JSON.stringify(e);return localStorage.setItem(`paper_${e.id}`,h),h}function I(h){let T=localStorage.getItem(`paper_${h}`);return T?(e=JSON.parse(T),n=[e.elements.map(p=>({...p}))],o=0,t(e),!0):!1}function N(){return JSON.stringify(e,null,2)}function C(h){try{return e=JSON.parse(h),n=[e.elements.map(p=>({...p}))],o=0,t(e),!0}catch{return!1}}function S(h="Untitled"){e={id:fe(),name:h,elements:[],gridSettings:{type:"none",spacing:20,color:"#cccccc",opacity:.5},createdAt:Date.now(),updatedAt:Date.now()},n=[[]],o=0,t(e)}function M(){let h=[];for(let T=0;T<localStorage.length;T++){let p=localStorage.key(T);if(p&&p.startsWith("paper_"))try{let v=JSON.parse(localStorage.getItem(p));h.push({id:v.id,name:v.name,updatedAt:v.updatedAt})}catch{}}return h.sort((T,p)=>p.updatedAt-T.updatedAt)}function L(h){localStorage.removeItem(`paper_${h}`)}function G(h,T){let p=localStorage.getItem(`paper_${h}`);if(p){let v=JSON.parse(p);return v.name=T,v.updatedAt=Date.now(),localStorage.setItem(`paper_${h}`,JSON.stringify(v)),e.id===h&&(e.name=T,e.updatedAt=v.updatedAt,t(e)),!0}return!1}return{getPaper:u,addElement:d,removeElement:_,eraseInRect:y,clearElements:P,setGridSettings:f,undo:g,redo:k,canUndo:E,canRedo:s,save:w,load:I,exportToJSON:N,importFromJSON:C,newPaper:S,listSavedPapers:M,deletePaper:L,renamePaper:G}}function ve(t){let e=t.getContext("2d");function n(){e.clearRect(0,0,t.width,t.height)}function o(){let f=t.getBoundingClientRect(),m=globalThis.devicePixelRatio||1;t.width=f.width*m,t.height=f.height*m,e.scale(m,m)}function i(f){if(f.points.length<2)return;e.beginPath(),e.strokeStyle=f.color,e.lineCap="round",e.lineJoin="round";let m=f.points;e.moveTo(m[0].x,m[0].y);for(let g=1;g<m.length;g++){let k=m[g-1],E=m[g],s=(k.pressure+E.pressure)/2;e.lineWidth=f.width*s,e.lineTo(E.x,E.y),e.stroke(),e.beginPath(),e.moveTo(E.x,E.y)}}function r(f){e.strokeStyle=f.color,e.lineWidth=f.strokeWidth,f.filled?(e.fillStyle=f.color,e.fillRect(f.x,f.y,f.width,f.height)):e.strokeRect(f.x,f.y,f.width,f.height)}function a(f){e.font=`${f.fontSize}px ${f.fontFamily}`,e.fillStyle=f.color,e.textBaseline="top",e.fillText(f.content,f.x,f.y)}function u(f,m,g){if(f.type==="none")return;e.save(),e.strokeStyle=f.color,e.globalAlpha=f.opacity,e.lineWidth=1;let k=f.spacing;if(f.type==="horizontal"||f.type==="square")for(let E=k;E<g;E+=k)e.beginPath(),e.moveTo(0,E),e.lineTo(m,E),e.stroke();if(f.type==="vertical"||f.type==="square")for(let E=k;E<m;E+=k)e.beginPath(),e.moveTo(E,0),e.lineTo(E,g),e.stroke();e.restore()}function d(f){"points"in f?i(f):"width"in f&&"height"in f&&!("content"in f)?r(f):"content"in f&&a(f)}function _(f){n();let m=t.getBoundingClientRect();u(f.gridSettings,m.width,m.height);for(let g of f.elements)d(g)}function b(f,m,g,k,E,s){e.strokeStyle=E,e.lineWidth=s,e.setLineDash([5,5]),e.strokeRect(f,m,g,k),e.setLineDash([])}function l(f,m,g){e.strokeStyle="#000000",e.lineWidth=1,e.beginPath(),e.moveTo(f,m),e.lineTo(f,m+g),e.stroke()}function x(f,m,g,k){e.save(),e.strokeStyle="#d32f2f",e.fillStyle="rgba(211, 47, 47, 0.1)",e.lineWidth=2,e.setLineDash([6,4]),e.fillRect(f,m,g,k),e.strokeRect(f,m,g,k),e.setLineDash([]),e.restore()}function y(){return t.toDataURL("image/png")}function P(f="paper.png"){let m=y(),g=document.createElement("a");g.download=f,g.href=m,g.click()}return{clear:n,resize:o,drawStroke:i,drawRectangle:r,drawTextElement:a,drawGrid:u,drawElement:d,render:_,drawPreviewRectangle:b,drawTextCursor:l,drawEraserSelection:x,getContext:()=>e,exportToPNG:y,downloadPNG:P}}function X(){return Math.random().toString(36).substring(2,15)}function ye(t,e){let n="pen",o={penColor:"#000000",penWidth:2,eraserWidth:20,fontSize:16,textColor:"#000000",fontFamily:"sans-serif"},i=null,r=null,a=null,u="",d=null;function _(s){["pen","eraser","rectangle","text"].includes(s)&&(y(),n=s)}function b(){return n}function l(s){o={...o,...s}}function x(){return{...o,currentTool:n}}function y(){if(a&&u){let s={id:X(),x:a.x,y:a.y,content:u,fontSize:o.fontSize,color:o.textColor,fontFamily:o.fontFamily};t(s)}i=null,r=null,a=null,u=""}function P(s){n==="pen"?i={id:X(),points:[s],color:o.penColor,width:o.penWidth}:n==="eraser"?d={x:s.x,y:s.y}:n==="rectangle"&&(r={x:s.x,y:s.y})}function f(s){if(n==="pen"&&i)i.points.push(s),e({type:"stroke",data:i});else if(n==="eraser"&&d){let w={x:Math.min(d.x,s.x),y:Math.min(d.y,s.y),width:Math.abs(s.x-d.x),height:Math.abs(s.y-d.y)};e({type:"eraserSelection",data:w})}else if(n==="rectangle"&&r){let w={x:Math.min(r.x,s.x),y:Math.min(r.y,s.y),width:Math.abs(s.x-r.x),height:Math.abs(s.y-r.y),color:o.penColor,strokeWidth:o.penWidth};e({type:"rectangle",data:w})}}function m(s){if(n==="pen"&&i)i.points.push(s),t(i),i=null;else if(n==="eraser"&&d){let w={x:Math.min(d.x,s.x),y:Math.min(d.y,s.y),width:Math.abs(s.x-d.x),height:Math.abs(s.y-d.y)};w.width>2&&w.height>2&&t({type:"erase",rect:w}),d=null,e(null)}else if(n==="rectangle"&&r){let w={id:X(),x:Math.min(r.x,s.x),y:Math.min(r.y,s.y),width:Math.abs(s.x-r.x),height:Math.abs(s.y-r.y),color:o.penColor,strokeWidth:o.penWidth,filled:!1};w.width>2&&w.height>2&&t(w),r=null,e(null)}}function g(s){if(n==="text"){if(a&&u){let w={id:X(),x:a.x,y:a.y,content:u,fontSize:o.fontSize,color:o.textColor,fontFamily:o.fontFamily};t(w)}a=s,u="",e({type:"textCursor",data:{...s,fontSize:o.fontSize}})}}function k(s){if(n==="text"&&a)if(s.key==="Escape"){if(u){let w={id:X(),x:a.x,y:a.y,content:u,fontSize:o.fontSize,color:o.textColor,fontFamily:o.fontFamily};t(w)}return a=null,u="",e(null),!0}else if(s.key==="Enter"){if(u){let w={id:X(),x:a.x,y:a.y,content:u,fontSize:o.fontSize,color:o.textColor,fontFamily:o.fontFamily};t(w),a={x:a.x,y:a.y+o.fontSize+4},u="",e({type:"textCursor",data:{...a,fontSize:o.fontSize}})}return!0}else{if(s.key==="Backspace")return u=u.slice(0,-1),e({type:"textPreview",data:{id:"",x:a.x,y:a.y,content:u,fontSize:o.fontSize,color:o.textColor,fontFamily:o.fontFamily}}),!0;if(s.key.length===1&&!s.ctrlKey&&!s.metaKey)return u+=s.key,e({type:"textPreview",data:{id:"",x:a.x,y:a.y,content:u,fontSize:o.fontSize,color:o.textColor,fontFamily:o.fontFamily}}),!0}return!1}function E(){return i?{type:"stroke",data:i}:a?{type:"textPreview",data:{id:"",x:a.x,y:a.y,content:u,fontSize:o.fontSize,color:o.textColor,fontFamily:o.fontFamily}}:null}return{setTool:_,getTool:b,setSettings:l,getSettings:x,handleStrokeStart:P,handleStrokeMove:f,handleStrokeEnd:m,handleClick:g,handleKeyDown:k,finishCurrentAction:y,getActivePreview:E}}function me(t){let e={strokeStart:[],strokeMove:[],strokeEnd:[],keyDown:[],click:[],penButton:[],penActive:[]},n=!1,o=null,i=0,r=500;function a(s){let w=t.getBoundingClientRect();return{x:s.clientX-w.left,y:s.clientY-w.top,pressure:s.pressure||.5}}function u(s){return!!(s.pointerType==="pen"&&(s.button===5||s.buttons&32)||s.pointerType==="eraser")}function d(s,w){let I=e[s];if(I)for(let N of I)N(w)}function _(s,w){e[s]||(e[s]=[]),e[s].push(w)}function b(s,w){let I=e[s];if(!I)return;let N=I.indexOf(w);N>-1&&I.splice(N,1)}function l(s){if(s.preventDefault(),!(s.pointerType==="touch"&&(o!==null||Date.now()-i<r))){if(s.pointerType==="pen"&&(o===null&&d("penActive",{active:!0}),o=s.pointerId,i=Date.now()),s.button===2){d("penButton",{type:"pen"});return}u(s)&&d("penButton",{type:"eraser"}),n=!0,t.setPointerCapture(s.pointerId),d("strokeStart",a(s))}}function x(s){n&&(s.pointerType==="touch"&&o!==null||(s.pointerType==="pen"&&(i=Date.now()),s.preventDefault(),d("strokeMove",a(s))))}function y(s){s.pointerType==="pen"&&s.pointerId===o&&(o=null,i=Date.now(),d("penActive",{active:!1})),n&&(s.pointerType==="touch"&&Date.now()-i<r||(s.preventDefault(),n=!1,t.releasePointerCapture(s.pointerId),d("strokeEnd",a(s))))}function P(s){n&&(n=!1,d("strokeEnd",a(s)))}function f(s){let w={key:s.key,code:s.code,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,altKey:s.altKey,metaKey:s.metaKey,preventDefault:()=>s.preventDefault()};d("keyDown",w)}function m(s){let w=t.getBoundingClientRect();d("click",{x:s.clientX-w.left,y:s.clientY-w.top})}function g(s){s.preventDefault()}function k(){t.addEventListener("pointerdown",l),t.addEventListener("pointermove",x),t.addEventListener("pointerup",y),t.addEventListener("pointerleave",P),t.addEventListener("click",m),t.addEventListener("contextmenu",g),document.addEventListener("keydown",f)}function E(){t.removeEventListener("pointerdown",l),t.removeEventListener("pointermove",x),t.removeEventListener("pointerup",y),t.removeEventListener("pointerleave",P),t.removeEventListener("click",m),t.removeEventListener("contextmenu",g),document.removeEventListener("keydown",f)}return{on:_,off:b,attach:k,detach:E,isDrawing:()=>n}}function ge(){let t={type:"square",spacing:50,color:"#cccccc",opacity:.5};function e(d){["none","horizontal","vertical","square"].includes(d)&&(t.type=d)}function n(d){d>0&&d<=200&&(t.spacing=d)}function o(d){t.color=d}function i(d){d>=0&&d<=1&&(t.opacity=d)}function r(){return{...t}}function a(d){t={...t,...d}}function u(){let d=["none","horizontal","vertical","square"],b=(d.indexOf(t.type)+1)%d.length;return t.type=d[b],t.type}return{setType:e,setSpacing:n,setColor:o,setOpacity:i,getSettings:r,loadSettings:a,cycleType:u}}function be(){let[t,e]=B({activeTool:"pen",canUndo:!1,canRedo:!1,penActive:!1}),n=K(null),o=K(null),i=K(null),r=K(null),a=K(null),u=K(null),d=z(()=>{if(!n.current||!o.current)return;let C=n.current.getPaper();o.current.render(C);let S=u.current;if(S)if(S.type==="stroke")o.current.drawStroke(S.data);else if(S.type==="rectangle")o.current.drawPreviewRectangle(S.data.x,S.data.y,S.data.width,S.data.height,S.data.color,S.data.strokeWidth);else if(S.type==="textCursor")o.current.drawTextCursor(S.data.x,S.data.y,S.data.fontSize);else if(S.type==="textPreview"){o.current.drawTextElement(S.data);let L=o.current.getContext().measureText(S.data.content).width;o.current.drawTextCursor(S.data.x+L,S.data.y,S.data.fontSize)}else S.type==="eraserSelection"&&o.current.drawEraserSelection(S.data.x,S.data.y,S.data.width,S.data.height);e(M=>({...M,canUndo:n.current?.canUndo()??!1,canRedo:n.current?.canRedo()??!1}))},[]),_=z(C=>{let S=ve(C),M=me(C),L=ge(),G=he(()=>{d()}),h=ye(p=>{p&&typeof p=="object"&&"type"in p&&p.type==="erase"?G.eraseInRect(p.rect):G.addElement(p),u.current=null},p=>{u.current=p,d()});n.current=G,o.current=S,i.current=h,r.current=M,a.current=L,M.on("strokeStart",p=>h.handleStrokeStart(p)),M.on("strokeMove",p=>h.handleStrokeMove(p)),M.on("strokeEnd",p=>h.handleStrokeEnd(p)),M.on("click",p=>h.handleClick(p)),M.on("penButton",p=>{p.type==="eraser"?(h.setTool("eraser"),e(v=>({...v,activeTool:"eraser"}))):p.type==="pen"&&(h.setTool("pen"),e(v=>({...v,activeTool:"pen"})))}),M.on("penActive",p=>{e(v=>({...v,penActive:p.active}))}),M.on("keyDown",p=>{if(p.ctrlKey||p.metaKey){if(p.key==="z"){p.preventDefault(),G.undo();return}else if(p.key==="y"){p.preventDefault(),G.redo();return}}if(!h.handleKeyDown(p)){if(p.key==="p"||p.key==="P")h.setTool("pen"),e(v=>({...v,activeTool:"pen"}));else if(p.key==="e"||p.key==="E")h.setTool("eraser"),e(v=>({...v,activeTool:"eraser"}));else if(p.key==="r"||p.key==="R")h.setTool("rectangle"),e(v=>({...v,activeTool:"rectangle"}));else if(p.key==="t"||p.key==="T")h.setTool("text"),e(v=>({...v,activeTool:"text"}));else if(p.key==="g"||p.key==="G"){let v=L.cycleType();G.setGridSettings({type:v})}}});let T=()=>{S.resize(),d()};return globalThis.addEventListener("resize",T),M.attach(),S.resize(),d(),()=>{M.detach(),globalThis.removeEventListener("resize",T)}},[d]),b=z(C=>{i.current?.setTool(C),e(S=>({...S,activeTool:C}))},[]),l=z(C=>{i.current?.setSettings({penColor:C,textColor:C})},[]),x=z(C=>{let S={fine:{penWidth:1,fontSize:12},thin:{penWidth:2,fontSize:16},medium:{penWidth:4,fontSize:20},thick:{penWidth:8,fontSize:28},bold:{penWidth:12,fontSize:36}},M=S[C]||S.thin;i.current?.setSettings(M)},[]),y=z(()=>{if(a.current&&n.current){let C=a.current.cycleType();n.current.setGridSettings({type:C})}},[]),P=z(C=>{a.current?.setSpacing(C),n.current?.setGridSettings({spacing:C})},[]),f=z(()=>{n.current?.undo()},[]),m=z(()=>{n.current?.redo()},[]),g=z(()=>{n.current?.clearElements()},[]),k=z(()=>{n.current?.save(),n.current?.newPaper()},[]),E=z(C=>{n.current?.load(C)},[]),s=z(()=>n.current?.listSavedPapers()??[],[]),w=z(C=>{n.current?.deletePaper(C)},[]),I=z((C,S)=>{n.current?.renamePaper(C,S)},[]),N=z(()=>{if(n.current&&o.current){let C=n.current.getPaper();o.current.downloadPNG(C.name+".png")}},[]);return{state:t,initializeApp:_,callbacks:{onToolChange:b,onColorChange:l,onSizeChange:x,onGridToggle:y,onGridSpacingChange:P,onUndo:f,onRedo:m,onClear:g,onNew:k,onLoad:E,onGetSavedPapers:s,onDelete:w,onRename:I,onExport:N}}}var Tt=0,Ot=Array.isArray;function c(t,e,n,o,i,r){e||(e={});var a,u,d=e;if("ref"in d)for(u in d={},e)u=="ref"?a=e[u]:d[u]=e[u];var _={type:t,props:d,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Tt,__i:-1,__u:0,__source:i,__self:r};if(typeof t=="function"&&(a=t.defaultProps))for(u in a)d[u]===void 0&&(d[u]=a[u]);return R.vnode&&R.vnode(_),_}function xe({onCanvasReady:t}){let e=K(null);return oe(()=>{e.current&&t(e.current)},[t]),c("div",{class:"canvas-container",children:c("canvas",{id:"paper-canvas",ref:e})})}var ke=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("path",{d:"M12 19l7-7 3 3-7 7-3-3z"}),c("path",{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"}),c("path",{d:"M2 2l7.586 7.586"})]}),et=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:c("path",{d:"M20 20H7L3 16c-.8-.8-.8-2 0-2.8L13.8 2.4c.8-.8 2-.8 2.8 0L21 6.8c.8.8.8 2 0 2.8L12 18"})}),tt=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:c("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),nt=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("polyline",{points:"4 7 4 4 20 4 20 7"}),c("line",{x1:"9",y1:"20",x2:"15",y2:"20"}),c("line",{x1:"12",y1:"4",x2:"12",y2:"20"})]}),ot=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("rect",{x:"3",y:"3",width:"18",height:"18"}),c("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),c("line",{x1:"3",y1:"15",x2:"21",y2:"15"}),c("line",{x1:"9",y1:"3",x2:"9",y2:"21"}),c("line",{x1:"15",y1:"3",x2:"15",y2:"21"})]}),rt=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("path",{d:"M3 7v6h6"}),c("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),it=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("path",{d:"M21 7v6h-6"}),c("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"})]}),at=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("polyline",{points:"3 6 5 6 21 6"}),c("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),lt=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),c("polyline",{points:"14 2 14 8 20 8"}),c("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),c("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),st=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:c("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),ct=()=>c("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),c("polyline",{points:"7 10 12 15 17 10"}),c("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),ut=()=>c("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),c("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),dt=()=>c("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",children:[c("polyline",{points:"3 6 5 6 21 6"}),c("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),pt=()=>c("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#1a466b","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",children:[c("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),c("polyline",{points:"14 2 14 8 20 8"}),c("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),c("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),c("polyline",{points:"10 9 9 9 8 9"})]});function Se(t){let{activeTool:e,onToolChange:n,onColorChange:o,onSizeChange:i,onGridToggle:r,onGridSpacingChange:a,onUndo:u,onRedo:d,onClear:_,onNew:b,onLoad:l,onGetSavedPapers:x,onDelete:y,onRename:P,onExport:f,canUndo:m,canRedo:g,penActive:k}=t,[E,s]=B(!1),[w,I]=B([]),[N,C]=B(50),S=K(null);oe(()=>{function p(v){S.current&&!S.current.contains(v.target)&&s(!1)}return document.addEventListener("click",p),()=>document.removeEventListener("click",p)},[]);let M=()=>{I(x()),s(!E)},L=(p,v,H)=>{p.stopPropagation();let F=prompt("Enter new name:",H);F&&F.trim()&&(P(v,F.trim()),I(x()))},G=(p,v)=>{p.stopPropagation(),confirm("Delete this paper?")&&(y(v),I(x()))},h=()=>{confirm("Clear all content?")&&_()};return c("div",{class:"paper-toolbar",children:[c("div",{class:"toolbar-group",children:[{tool:"pen",icon:ke,title:"Pen (P)"},{tool:"eraser",icon:et,title:"Eraser (E)"},{tool:"rectangle",icon:tt,title:"Rectangle (R)"},{tool:"text",icon:nt,title:"Text (T)"}].map(({tool:p,icon:v,title:H})=>c("button",{type:"button","data-tool":p,class:`tool-btn ${e===p?"active":""}`,title:H,onClick:()=>n(p),children:c(v,{})},p))}),c("div",{class:"toolbar-separator"}),c("div",{class:"toolbar-group",children:[c("input",{type:"color",id:"pen-color",defaultValue:"#000000",title:"Color",onInput:p=>o(p.target.value)}),c("select",{id:"size-select",title:"Size",defaultValue:"thin",onChange:p=>i(p.target.value),children:[c("option",{value:"fine",children:"Fine"}),c("option",{value:"thin",children:"Thin"}),c("option",{value:"medium",children:"Medium"}),c("option",{value:"thick",children:"Thick"}),c("option",{value:"bold",children:"Bold"})]})]}),c("div",{class:"toolbar-separator"}),c("div",{class:"toolbar-group",children:[c("button",{type:"button",id:"grid-toggle",class:"tool-btn",title:"Toggle Grid (G)",onClick:r,children:c(ot,{})}),c("input",{type:"range",id:"grid-spacing",min:"10",max:"100",value:N,title:"Grid Spacing",onInput:p=>{let v=parseInt(p.target.value);C(v),a(v)}}),c("span",{id:"grid-spacing-value",children:N})]}),c("div",{class:"toolbar-separator"}),c("div",{class:"toolbar-group",children:[c("button",{type:"button",id:"undo-btn",class:"tool-btn",title:"Undo (Ctrl+Z)",onClick:u,disabled:!m,children:c(rt,{})}),c("button",{type:"button",id:"redo-btn",class:"tool-btn",title:"Redo (Ctrl+Y)",onClick:d,disabled:!g,children:c(it,{})}),c("button",{type:"button",id:"clear-btn",class:"tool-btn",title:"Clear All",onClick:h,children:c(at,{})})]}),c("div",{class:"toolbar-separator"}),c("div",{class:"toolbar-group",children:[c("button",{type:"button",id:"new-btn",class:"tool-btn",title:"New Paper",onClick:b,children:c(lt,{})}),c("div",{class:"load-dropdown",ref:S,children:[c("button",{type:"button",id:"load-btn",class:"tool-btn",title:"Load Paper",onClick:M,children:c(st,{})}),c("div",{id:"load-dropdown-menu",class:`dropdown-menu ${E?"":"hidden"}`,children:w.length===0?c("div",{class:"dropdown-item disabled",children:"No saved papers"}):w.map(p=>c("div",{class:"dropdown-item",onClick:()=>{l(p.id),s(!1)},children:[c("span",{class:"paper-name",children:p.name}),c("span",{class:"paper-date",children:new Date(p.updatedAt).toLocaleDateString()}),c("div",{class:"paper-actions",children:[c("button",{type:"button",class:"paper-action-btn",title:"Rename",onClick:v=>L(v,p.id,p.name),children:c(ut,{})}),c("button",{type:"button",class:"paper-action-btn delete",title:"Delete",onClick:v=>G(v,p.id),children:c(dt,{})})]})]},p.id))})]}),c("button",{type:"button",id:"export-btn",class:"tool-btn",title:"Export to PNG",onClick:f,children:c(ct,{})})]}),c("div",{class:"toolbar-spacer"}),c("div",{id:"pen-indicator",class:`pen-indicator ${k?"":"hidden"}`,children:c(ke,{})}),c("div",{class:"toolbar-logo",children:[c(pt,{}),c("span",{class:"toolbar-logo-text",children:"Paper"})]})]})}function we(){let{state:t,initializeApp:e,callbacks:n}=be(),o=z(i=>{e(i)},[e]);return c("div",{class:"paper-container",children:[c(Se,{activeTool:t.activeTool,canUndo:t.canUndo,canRedo:t.canRedo,penActive:t.penActive,...n}),c(xe,{onCanvasReady:o})]})}var _t=document.getElementById("paper-root");_t&&Ue(c(we,{}),_t);
